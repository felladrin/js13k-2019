<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Back Read</title><style>.background1{background:radial-gradient(circle,#bed678 0,#3b8d89 100%)}.background2{background:linear-gradient(-45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),linear-gradient(45deg,transparent 25%,hsla(0,0%,100%,.2) 0,hsla(0,0%,100%,.2) 50%,transparent 0,transparent 75%,hsla(0,0%,100%,.2) 0),#a6d9ee;background-size:20em 20em}.background3{background:repeating-linear-gradient(45deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(111,211,151,.15) 0,rgba(168,211,111,.15) 40px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,211,211,.15) 0,rgba(111,137,211,.15) 70px,rgba(247,242,84,.15) 0,rgba(84,247,209,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(135,111,211,.15) 0,rgba(111,165,211,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 120px,rgba(10,45,35,.15) 0,rgba(19,10,45,.15) 140px),repeating-linear-gradient(135deg,transparent 5px,rgba(10,35,45,.15) 0,rgba(10,35,45,.15) 10px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 35px,rgba(211,111,185,.15) 0,rgba(111,174,211,.15) 40px,rgba(10,22,45,.15) 0,rgba(10,18,45,.15) 50px,rgba(10,35,45,0) 0,rgba(10,35,45,0) 60px,rgba(111,160,211,.15) 0,rgba(126,111,211,.15) 70px,rgba(247,212,84,.15) 0,rgba(247,179,84,.15) 80px,rgba(247,179,84,0) 0,rgba(247,179,84,0) 90px,rgba(111,211,197,.15) 0,rgba(111,211,179,.15) 110px,rgba(211,119,111,0) 0,rgba(211,119,111,0) 140px,rgba(10,45,32,.15) 0,rgba(17,10,45,.15) 160px),#a6eed0}.background4{background:linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.0980392) 0),linear-gradient(45deg,rgba(0,0,0,.1) 25%,transparent 0,transparent 75%,rgba(0,0,0,.1) 0,rgba(0,0,0,.1) 0),#a6e7ee;background-position:0 0,40px 40px;background-size:80px 80px}.speaker{vertical-align:middle;box-sizing:border-box;display:inline-block;background:currentColor;background-clip:content-box;width:1em;height:1em;border:.333em solid transparent;border-right-color:initial;position:relative;left:-.337em}.speaker.on:after,.speaker.on:before{content:"";background:currentColor;width:.1em;position:absolute}.speaker.on:before{height:.333em;right:-.533em}.speaker.on:after{height:.667em;right:-.733em;top:-50%}.speaker.off:after,.speaker.off:before{content:"";background:currentColor;width:.1em;position:absolute;height:1.2em;margin-top:-.333em;top:-.1em;left:.1em;transform:translateX(.333em) rotate(-45deg)}.speaker.off:before{background:#04233d;left:.2em}.css-clock{width:18px;height:18px;border-radius:50%;background-color:#fff;position:relative;display:block}.css-clock:before{height:9px;left:9px;top:3px}.css-clock:after,.css-clock:before{content:"";width:1px;background-color:#636363;display:block;position:absolute;opacity:.6}.css-clock:after{height:6px;top:7px;left:11px;transform:rotate(45deg)}*{box-sizing:border-box;-webkit-user-select:none;user-select:none}body,html{height:100%}body{margin:0;overflow:hidden;font-family:sans-serif}.button,.speaker,a,button{cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB77zEsqgBu7RFf3QNU2QBGuwAopgAfngCH9UeF+zh/9DNs6g9k4QZf3gQ7sQCK/j6H/DxKwgAinwCV/1Z49hpQvhRp5wto5wti5QIipACK+k2R/0By8BRZ3ABRyAA/tQBDtAAbnwC9d09BAAAAFHRSTlMABTMCFn0QHgqbgGZbLiCOjHRDHCnm7AYAAACqSURBVDjL7dLJEoIwDIBhFltkdaOtUBWUHcHd938149k2d2f4r/kOmUmMB6WmbSBVVThDRXV9WqhIiv0JFUl5QAWAGBdJEeMCAIjypRVds4MuTacT47D9dh/eGsG4OEIiz0a1ACDyPuP81jIQvyDNRH6WUtZ1ynxHCWDuLjxCyCpQAt5L11tbUBhRBWBt7RJrQ+eQqVwyXRL0WFHg4+emjoM/jAnZxtQ/9AFcVA7F82ZJgQAAAABJRU5ErkJggg=="),auto}.header{overflow:hidden;background-color:rgba(0,0,0,.3);width:100%;color:#fff;padding:14px 16px;text-align:center;display:grid;grid-template-columns:auto 1fr auto}.scene{height:100%;margin:0 10px}.scene.inactive{display:none}.container{height:100%;display:grid;grid-template-rows:auto 1fr;align-items:center;cursor:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAA7VBMVEUAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEDe9fDC4/zX8fG11+6y0e15mbXq///u//652vSu1PKrwr6etrRzj6294v7m/P3C4Pvh9/e92vfk+va30vOw1PK12O+nvr19nrikurZ4krVvj6tshqr////0///O7v/G5P/D2/7h/Py+1/zl/vvs//q+3Pqz2ffa9fba8fG01PDC1cy9z8i6zMS0yMR8n76Do7yhvLusv7qCo7l2jbSnvbJ6lrJxiK5viaoSVG2nAAAAF3RSTlMABDIHFn8QHguae2ZbNSwgnI6MdEMcCRKrcsoAAADDSURBVDjL7dLHFoJADEBRGGXA3hUEKaJURbH33tv/f46wH7L3HF+WubuE2mMcoymgwzEbB8VpeEOg0EZyDxSabDdA0W3UzEUzFJFA2JptQFzbgiBsZtFCk2tB9vIZJc4tV3VVdd2SIsSdr9c7wSi8RxYeL4qKZRj8ZHxBcQKQVuJO8X1d1yUpxRLAyxKdT77AMEyylCaB/twZJJhyBiGUzWESmAb7TAVzHFeN0QTweBeT4LFy6RR8bsyy8MPQYdS/X+gLp8ATaP9llugAAAAASUVORK5CYII="),auto}@media screen and (min-width:376px) and (min-height:700px){body{background-color:#f8f8ff}.container{width:376px;height:700px;margin:auto;position:absolute;top:0;bottom:0;left:0;right:0;border-color:#000;border-style:solid;border-width:60px 16px;border-radius:36px}.container:before{width:60px;height:5px;top:-30px;border-radius:10px}.container:after,.container:before{content:"";display:block;position:absolute;left:50%;transform:translate(-50%,-50%);background:#333}.container:after{width:35px;height:35px;bottom:-65px;border-radius:50%}}div[data-scene=About],div[data-scene=GameOver],div[data-scene=Tutorial]{display:grid;grid-template-columns:auto;align-items:center}div[data-scene=About] div.colored,div[data-scene=GameOver] div.colored,div[data-scene=Tutorial] div.colored{border-radius:.2em;border:2px solid #000;line-height:16px;color:#fff;background:rgba(33,107,175,.8);padding:10px;text-align:center}div[data-scene=About] div.colored:nth-child(2n+0),div[data-scene=GameOver] div.colored:nth-child(2n+0),div[data-scene=Tutorial] div.colored:nth-child(2n+0){background:rgba(228,152,0,.8)}div[data-scene=About] div.colored:nth-child(3n+0),div[data-scene=GameOver] div.colored:nth-child(3n+0),div[data-scene=Tutorial] div.colored:nth-child(3n+0){background:rgba(82,156,79,.8)}div[data-scene=About] a,div[data-scene=GameOver] a,div[data-scene=Tutorial] a{background-color:#f90;color:#fff;padding:2px 4px;text-decoration:none;border-radius:2px;border:1px solid #000}div[data-scene=About] a:hover,div[data-scene=GameOver] a:hover,div[data-scene=Tutorial] a:hover{background-color:#c16e00}div[data-scene=Menu]{display:grid;grid-template-columns:auto 1fr auto;align-items:center;margin:0}div[data-scene=Menu] .perspective{position:relative;width:210px;height:140px;margin:0 auto;perspective:1000px}div[data-scene=Menu] .perspective .menu-carousel{width:100%;height:100%;position:absolute;transform-style:preserve-3d;transition:transform 1s}div[data-scene=Menu] .perspective .menu-carousel .menu-option{position:absolute;width:190px;height:120px;left:10px;top:10px;border-radius:.2em;border:2px solid #000;line-height:116px;font-size:30px;font-weight:700;color:#fff;text-align:center}div[data-scene=Menu] .perspective .menu-carousel .menu-option:hover div{transform:rotateY(0deg)}div[data-scene=Menu] .perspective .menu-carousel .menu-option div{transform:rotateY(180deg);transition:.5s}div[data-scene=Menu] .perspective .menu-carousel .menu-option:first-child{background:rgba(82,156,79,.95);transform:rotateY(0deg) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(2){background:rgba(33,175,154,.95);transform:rotateY(120deg) translateZ(60px)}div[data-scene=Menu] .perspective .menu-carousel .menu-option:nth-child(3){background:rgba(228,152,0,.95);transform:rotateY(240deg) translateZ(60px)}div[data-scene=Menu] .next,div[data-scene=Menu] .previous{display:inline-block;padding:6px 17px;margin:0 10px;background-color:hsla(0,0%,100%,.3607843137254902);color:#0d74b6;border-radius:50%;font-size:25px}div[data-scene=Menu] .next:hover,div[data-scene=Menu] .previous:hover{background-color:#a6d9ee}div[data-scene=GamePlay]{display:grid;grid-template-rows:repeat(6,1fr);align-items:center;text-align:center}div[data-scene=GamePlay] .sentence{font-size:30px;transform:rotateY(180deg);text-transform:uppercase;border-radius:.2em;border:2px solid #000;line-height:45px;font-weight:700;color:#fff;background:rgba(82,156,79,.9)}div[data-scene=GamePlay] .question{font-size:18px;border-radius:.2em;border:2px solid #000;line-height:38px;color:#fff;background:rgba(167,83,113,.8)}div[data-scene=GamePlay] .status{display:grid;grid-template-columns:repeat(2,1fr);align-items:center}div[data-scene=GamePlay] .status>div{padding:5px;border-radius:.2em;border:2px solid #000;color:#fff;background:rgba(113,65,173,.75);margin:0 10px}.back-to-menu,div[data-scene=GamePlay] .answer{display:inline-block;box-sizing:initial;margin:.5em;padding:0 1.5em;border:2px solid rgba(8,19,19,.8);border-radius:.2em;font:normal normal 700 1em/2em Arial,Helvetica,sans-serif;color:#fff;text-overflow:clip;white-space:nowrap;background:rgba(103,192,185,.9);box-shadow:0 0 1px 1px rgba(50,126,129,.8),0 1px 0 0 rgba(0,0,0,.3);transition:all .2s ease-in-out 10ms}.back-to-menu:hover,div[data-scene=GamePlay] .answer:hover{border:2px solid rgba(11,10,22,.9);box-shadow:inset 0 0 1px 1px rgba(10,11,14,.8),0 1px 0 0 rgba(0,0,0,.3)}.back-to-menu:active,div[data-scene=GamePlay] .answer:active{position:relative;top:1px;border:2px solid #030707;color:#e9e9e9;background:#52a19a;box-shadow:inset 0 0 1px 1px rgba(56,56,56,.8),inset 0 1px 0 0 rgba(0,0,0,.3);transition:none}.current-streak,.longest-streak{font-size:large;font-weight:700}</style></head><body> <div class="background1 container"> <div class="header"> <div class="left"><i class="on speaker"></i></div> <div class="center"></div> <div class="right"><i class="css-clock"></i></div> </div> <div data-scene="Menu" class="inactive scene"> <div> <div class="button previous">&#8249;</div> </div> <div> <div class="perspective"> <div class="menu-carousel"> <div class="button menu-option" data-option="GamePlay"> <div>START</div> </div> <div class="button menu-option" data-option="Tutorial"> <div>TUTORIAL</div> </div> <div class="button menu-option" data-option="About"> <div>ABOUT</div> </div> </div> </div> </div> <div> <div class="button next">&#8250;</div> </div> </div> <div data-scene="Tutorial" class="inactive scene"> <div class="colored"><strong>Game Tutorial</strong></div> <div class="colored"> <em>Back Read</em> is composed by multiple-choice questions. </div> <div class="colored"> Read the reverse-text on the board and answer the question. </div> <div class="colored"> Keep an eye on the clock, the game is over when timer reaches zero. </div> <div class="colored"> Answering a question correctly gives you 5 seconds more. </div> <div class="colored"> While answering wrongly penalizes you with 1 second less. </div> <div class="colored"> Pro Tip: The longer your streak, the harder the challenges get! </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> <div data-scene="About" class="inactive scene"> <div class="colored"> Game developed for <a href="https://js13kgames.com" target="_blank">Js13kGames 2019</a> </div> <div class="colored"> Author: Felladrin &middot; <a href="https://github.com/felladrin" target="_blank">GitHub</a> &middot; <a href="https://www.linkedin.com/in/victornogueira" target="_blank">LinkedIn</a> </div> <div class="colored"> Source code available <a href="https://github.com/felladrin/js13k-2019" target="_blank">here</a> </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> <div data-scene="GamePlay" class="inactive scene"> <div class="sentence"></div> <div class="question"></div> <div class="answer button" data-id="0"></div> <div class="answer button" data-id="1"></div> <div class="answer button" data-id="2"></div> <div class="answer button" data-id="3"></div> <div class="status"> <div> Current Streak <div class="current-streak">0</div> </div> <div> Longest Streak <div class="longest-streak">0</div> </div> </div> </div> <div data-scene="GameOver" class="inactive scene"> <div class="colored"><strong>Time's Over!</strong></div> <div class="colored">That was great! Check the stats!</div> <div class="colored"> Your streak in this round: <span class="current-streak">0</span> </div> <div class="colored"> Your longest streak: <span class="longest-streak">0</span> </div> <div class="colored"> Challenge your family and friends to see if they can do better! </div> <div class="back-to-menu button">&#8249; Back To Menu</div> </div> </div> <script>(function () {var j={};function E(r){for(var e in r)j.hasOwnProperty(e)||(j[e]=r[e])}var R={};Object.defineProperty(R,"__esModule",{value:!0});var fa="$injector";R.INJECTOR_TOKEN=fa;var ga="$target";R.TARGET_TOKEN=ga;var G,a,V={};Object.defineProperty(V,"__esModule",{value:!0}),function(e){e.Transient="transient",e.Singleton="singleton"}(a=G||(G={},V.Scope=G));var H={};Object.defineProperty(H,"__esModule",{value:!0});class X extends Error{}var wa=X;function ha(r){return"function"==typeof r?"inject":"resolve"}function ia(r){return"function"==typeof r?r.toString().startsWith("class")?`[class ${r.name||"<anonymous>"}]`:`[function ${r.name||"<anonymous>"}]`:`[token "${String(r)}"]`}H.TypedInjectError=wa;class xa extends X{constructor(r){super(`Injector is already disposed. Please don't use it anymore. Tried to ${ha(r)} ${ia(r)}.`)}}var ja=xa;H.InjectorDisposedError=ja;class T extends X{constructor(r,e){super(`Could not ${ha(r[0])} ${r.map(ia).join(" -> ")}. Cause: ${e.message}`),this.path=r,this.cause=e}static create(r,e){return e instanceof T?new T([r,...e.path],e.cause):new T([r],e)}}var U=T;H.InjectionError=U;var ka={};function ya(s){return s&&s.dispose&&"function"==typeof s.dispose}Object.defineProperty(ka,"__esModule",{value:!0});var la=ya;ka.isDisposable=la;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});const ma=G.Singleton;class na{injectClass(e,r){this.throwIfDisposed(e);try{return new e(...this.resolveParametersToInject(e,r))}catch(t){throw U.create(e,t)}}injectFunction(e,r){this.throwIfDisposed(e);try{return e(...this.resolveParametersToInject(e,r))}catch(t){throw U.create(e,t)}}resolveParametersToInject(e,r){return(e.inject||[]).map(t=>{switch(t){case ga:return r;case fa:return this;default:return this.resolveInternal(t,e);}})}provideValue(e,r){return new Aa(this,e,r)}provideClass(e,r,t=ma){return new Ca(this,e,t,r)}provideFactory(e,r,t=ma){return new Ba(this,e,t,r)}resolve(e,r){return this.throwIfDisposed(e),this.resolveInternal(e,r)}throwIfDisposed(e){if(this.isDisposed)throw new ja(e)}}class za extends na{resolveInternal(e){throw new Error(`No provider found for "${e}"!.`)}dispose(){return Promise.resolve()}get isDisposed(){return!1}}class _ extends na{constructor(e,r,t){super(),this.parent=e,this.token=r,this.scope=t,this.disposables=new Set,this.isDisposed=!1}async dispose(){this.isDisposed||(this.isDisposed=!0,await this.disposeInjectedValues(),this.disposables.clear(),await this.parent.dispose())}async disposeInjectedValues(){const e=[...this.disposables.values()].map(e=>e.dispose());await Promise.all(e)}resolveInternal(e,r){if(e!==this.token)return this.parent.resolve(e,r);if(this.cached)return this.cached.value;try{const s=this.result(r);return this.addToCacheIfNeeded(s),s}catch(t){throw U.create(e,t)}}addToCacheIfNeeded(e){this.scope===G.Singleton&&(this.cached={value:e})}registerProvidedValue(e){return la(e)&&this.disposables.add(e),e}}class Aa extends _{constructor(e,r,t){super(e,r,G.Transient),this.value=t}result(){return this.value}}class Ba extends _{constructor(e,r,t,s){super(e,r,t),this.injectable=s}result(e){return this.registerProvidedValue(this.parent.injectFunction(this.injectable,e))}}class Ca extends _{constructor(e,r,t,s){super(e,r,t),this.injectable=s}result(e){return this.registerProvidedValue(this.parent.injectClass(this.injectable,e))}}var Da=new za;Z.rootInjector=Da;var aa={};function Ea(...e){return e}Object.defineProperty(aa,"__esModule",{value:!0});var Fa=Ea;aa.tokens=Fa;Object.defineProperty(j,"__esModule",{value:!0}),E(R),E(V),E(Z),E(H),E(aa);const Ga={songData:[{i:[1,163,128,0,3,119,116,0,0,0,0,57,25,0,0,0,195,6,0,1,20,138,1,51,171,6,79,6],p:[,,1,1,1,1,1,1,1,2],c:[{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155,143,155,150,146,,148,150],f:[2,12,,13,,,,,,,,,,,,,,,,,,,,,,,,,,,,,48,35,,25]},{n:[143,,155,148,155,150,143,,155,150,155,150,146,145,141,,143,,155,148,155,150,143,,155],f:[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,2,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,188]}]},{i:[2,232,128,0,3,255,128,0,0,0,0,36,0,0,0,0,195,6,1,2,135,0,24,73,81,6,43,6],p:[1,1,1,1,1,1,1,1],c:[{n:[143,143,131,,,,,,,,,,,,,,,,,,,,,,,,,,,,141,138,138,138,126,,,,,,,,,,,,,,,,,,,,,,,,,,,,136,133],f:[12,,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,12,,28,,36,,,,,,,,,,,,,,,,,,,,,,,,,,,,28]}]},{i:[0,0,128,0,0,0,128,0,0,125,0,1,17,0,0,0,0,0,0,1,229,171,0,68,39,3,0,3],p:[1,1,1,1,2,2,2,2,,,2,2,2,2,2],c:[{n:[,,,,135,,,,,,,,135,,,,,,,,135,,,,,,,,135],f:[24,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,24,32,,,,67,,,,,,,,67,,,,,,,,72,,,,,,,,67,,,68]},{n:[135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135,135],f:[13,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,,,13,13,17,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17,,,32,17]}]},{i:[1,255,128,0,1,154,116,9,0,0,0,36,0,0,0,0,0,0,0,2,164,0,4,15,47,3,63,3],p:[,,,,1,2,1,2,1,4,3,3,3,3,2,4],c:[{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,131,,119,131,,131,131],f:[]},{n:[115,,127,,127,,127,115,,127,,115,127,,127,127,112,,124,,124,,124,112,,124,,112,122,,122,122],f:[]},{n:[119,,131,,132,,132,131,,119,131,,132,,132,129,119,,131,,132,,132,131,,119,131,119,132,,132,129],f:[]},{n:[119,,131,,131,,131,119,,131,,119,131,,131,131,119,,131,,131,,131,119,,,,,,,,129],f:[]}]},{i:[3,59,128,1,3,100,128,0,1,131,0,4,40,0,0,1,0,4,1,2,55,115,124,121,67,6,39,1],p:[,,,10,1,1,1,1,,,,10,1,1,1,10],c:[{n:[,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147,,,,,,,,147,,,147,,147,,,147],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[],f:[]},{n:[,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147,,,,,,,,,,,,,,,,,,,,,,,,,147,147,147,147,147,147,147,147],f:[,,,,,,,,,,,,,,,,,,,,,,,,24,,,,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,121,,,,255]}]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,100,128,0,3,201,128,0,0,0,5,6,58,0,0,0,195,6,1,2,135,0,0,32,147,6,121,6],p:[],c:[]},{i:[2,0,101,0,3,0,127,0,1,255,72,3,72,0,0,0,0,6,1,2,29,0,0,156,147,3,8,6],p:[,1,,,,,,,,1,,,,,,1],c:[{n:[,,,,,,,,,,,,,,,,,,,,,,,135],f:[]}]}],rowLen:5050,patternLen:32,endPattern:15,numChannels:8};var Ha,k;(function(e){e.Menu="Menu",e.Tutorial="Tutorial",e.About="About",e.GamePlay="GamePlay",e.GameOver="GameOver"})(k||(Ha=k={},Ha));class b{static pickIndexFromLength(t){return Math.floor(Math.random()*t)}static pickIntInclusive(t,r){return Math.floor(Math.random()*(Math.floor(r)-Math.ceil(t)+1))+Math.ceil(t)}static pickElementFromArray(t){return t[this.pickIndexFromLength(t.length)]}static pickElementFromEnum(t){const r=Object.keys(t).map(t=>Number.parseInt(t,10)).filter(t=>!Number.isNaN(t));return r[Math.floor(Math.random()*r.length)]}static shuffle(t){for(let r=t.length-1;r>0;r--){const e=Math.floor(Math.random()*(r+1));[t[r],t[e]]=[t[e],t[r]]}return t}}class ba{constructor(e,t,n,a,i,o,r){this.gameHtmlElement=e,this.gameSceneManager=t,this.gameTopBar=n,this.gameStreakManager=a,this.gamePlayScene=i,this.gameCountDownTimer=o,this.gameAudio=r,this.listenToBackToMenuClicks(),this.listenToButtonsHoversAndClicks(),this.listenToCountDownTimerOver(),this.listenToFirstInteractionToStartBackgroundMusic(),this.listenToSceneChanges(),this.listenToCorrectlyAnsweredQuestions(),this.listenToWindowLoadToSetARandomBackground()}listenToBackToMenuClicks(){Array.from(this.gameHtmlElement.backToMenuButtons).forEach(e=>{e.addEventListener("click",()=>{this.gameSceneManager.displayScene(k.Menu)})})}listenToButtonsHoversAndClicks(){if(!window.AudioContext)return;const e=new AudioContext,t=e.createBuffer(1,96e3,48e3),n=t.getChannelData(0),a=(e,t)=>(t-e)/t,i=4e4,o=e.createGain();o.gain.value=.1,o.connect(e.destination);const r=e=>e>i?null:Math.sin(e/8e3-Math.sin(e/60)*Math.sin(e/61))*a(e,i),s=e=>e>i?null:Math.sin(e/6e3-Math.sin(e/90)*Math.sin(e/91))*a(e,i);Array.from(this.gameHtmlElement.allButtons).forEach(a=>{a.addEventListener("click",()=>{if(this.gameTopBar.isAudioDisabled())return;for(let e=96e3;e--;)n[e]=r(e);const a=e.createBufferSource();a.buffer=t,a.connect(o),a.start()}),a.addEventListener("mouseenter",()=>{if(this.gameTopBar.isAudioDisabled())return;for(let e=96e3;e--;)n[e]=s(e);const a=e.createBufferSource();a.buffer=t,a.connect(o),a.start()})})}listenToSceneChanges(){this.gameSceneManager.onSceneDisplayed.addListener(e=>{switch(e){case k.Menu:this.gameTopBar.displayNotification("Welcome! Ready to start?");break;case k.Tutorial:this.gameTopBar.displayNotification("Ah, finally someone here!");break;case k.About:this.gameTopBar.displayNotification("Curious, huh!?");break;case k.GamePlay:this.gameTopBar.displayNotification("Good Luck!"),this.gameStreakManager.currentStreak=0,this.gamePlayScene.preparePhase(),this.gameCountDownTimer.start(10);break;case k.GameOver:this.gameTopBar.displayNotification("Oh no! Time's over!");}})}listenToCountDownTimerOver(){this.gameCountDownTimer.onGamePlayCountDownTimeOver.addListener(()=>{this.gameSceneManager.displayScene(k.GameOver)})}listenToFirstInteractionToStartBackgroundMusic(){const e=()=>{this.gameAudio.create(Ga,.2,!0,!0),document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)};document.addEventListener("mousedown",e),document.addEventListener("touchstart",e)}listenToWindowLoadToSetARandomBackground(){window.addEventListener("load",()=>{this.gameHtmlElement.setBackgroundId(b.pickIntInclusive(1,4))})}listenToCorrectlyAnsweredQuestions(){this.gamePlayScene.onAnsweredCorrectly.addListener(()=>{this.gameStreakManager.increaseStreak(),this.gameTopBar.displayNotification(b.pickElementFromArray(["Awesome!","Perfect!","Amazing!","Outstanding!","Splendid!","Marvelous!","Superb!","Fabulous!","Fantastic!","Phenomenal!","Wonderful!"]))})}}ba.inject=j.tokens("gameHtmlElement","gameSceneManager","gameTopBar","gameStreakManager","gamePlayScene","gameCountDownTimer","gameAudio");class ca{constructor(e,t){this.gameSceneManager=e,this.gameHtmlElement=t,this.cellCount=this.gameHtmlElement.menuCarousel.children.length,this.selectedIndex=0,this.gameHtmlElement.previousButton.addEventListener("click",()=>{this.selectedIndex--,this.rotate()}),this.gameHtmlElement.nextButton.addEventListener("click",()=>{this.selectedIndex++,this.rotate()}),Array.from(this.gameHtmlElement.menuCarousel.children).forEach(e=>{e.addEventListener("click",()=>{this.gameSceneManager.displayScene(e.dataset.option)})})}rotate(){const e=this.selectedIndex/this.cellCount*-360;this.gameHtmlElement.menuCarousel.style.transform=`rotateY(${e}deg)`}}ca.inject=j.tokens("gameSceneManager","gameHtmlElement");class Ia{constructor(t){this.generate=()=>{let t,i,s,o,r,e,n,h,a,m,c,u;const l=new Int32Array(this.mNumWords),w=this.mSong.songData[this.mCurrentCol],{rowLen:S}=this.mSong,{patternLen:f}=this.mSong;let M,d,g=0,p=0,x=!1,N=[];for(h=0;h<=this.mLastRow;++h)for(i=w.p[h],a=0;a<f;++a){const $=i?w.c[i-1].f[a]:0;$&&(w.i[$-1]=w.c[i-1].f[a+f]||0,$<16&&(N=[]));const C=this.mOscillators[w.i[15]],y=w.i[16]/512,B=Math.pow(2,w.i[17]-9)/S,L=w.i[18],W=w.i[19],q=43.23529*w.i[20]*3.141592/44100,A=1-w.i[21]/255,O=1e-5*w.i[22],P=w.i[23]/32,Q=w.i[24]/512,Y=6.283184*Math.pow(2,w.i[25]-9)/S,F=w.i[26]/255,I=w.i[27]*S&-2;for(m=(h*f+a)*S,t=0;t<4;++t)if(n=i?w.c[i-1].n[a+t*f]:0){N[n]||(N[n]=this.createNote(w,n,S));const t=N[n];for(r=0,o=2*m;r<t.length;r++,o+=2)l[o]+=t[r]}for(r=0;r<S;r++)(c=l[e=2*(m+r)])||x?(s=q,L&&(s*=C(B*e)*y+.5),g+=(s=1.5*Math.sin(s))*(M=A*(c-g)-(p+=s*g)),c=3==W?g:1==W?M:p,O&&(c=(c*=O)<1?c>-1?this.oscSin(.25*c):-1:1,c/=O),x=(c*=P)*c>1e-5,d=c*(1-(u=Math.sin(Y*e)*Q+.5)),c*=u):d=0,e>=I&&(d+=l[e-I+1]*F,c+=l[e-I]*F),l[e]=0|d,l[e+1]=0|c,this.mMixBuf[e]+=0|d,this.mMixBuf[e+1]+=0|c}return this.mCurrentCol++,this.mCurrentCol/this.mSong.numChannels},this.createWave=()=>{const t=44+2*this.mNumWords-8,i=t-36,s=new Uint8Array(44+2*this.mNumWords);s.set([82,73,70,70,255&t,t>>8&255,t>>16&255,t>>24&255,87,65,86,69,102,109,116,32,16,0,0,0,1,0,2,0,68,172,0,0,16,177,2,0,4,0,16,0,100,97,116,97,255&i,i>>8&255,i>>16&255,i>>24&255]);for(let o=0,r=44;o<this.mNumWords;++o){let t=this.mMixBuf[o];t=t<-32767?-32767:t>32767?32767:t,s[r++]=255&t,s[r++]=t>>8&255}return s},this.oscSin=t=>Math.sin(6.283184*t),this.oscSaw=t=>t%1*2-1,this.oscSquare=t=>t%1<.5?1:-1,this.oscTri=t=>{const i=t%1*4;return i<2?i-1:3-i},this.mOscillators=[this.oscSin,this.oscSquare,this.oscSaw,this.oscTri],this.getNoteFreq=t=>.003959503758*Math.pow(2,(t-128)/12),this.createNote=(t,i,s)=>{const o=this.mOscillators[t.i[0]],r=t.i[1],e=t.i[3],n=this.mOscillators[t.i[4]],h=t.i[5],a=t.i[8],m=t.i[9],c=t.i[10]*t.i[10]*4,u=t.i[11]*t.i[11]*4,l=t.i[12]*t.i[12]*4,w=1/l,S=s*Math.pow(2,2-t.i[14]);let f=t.i[13];const M=new Int32Array(c+u+l);let d,g,p,x,N,$,C,y=0,B=0;for(g=0,p=0;g<c+u+l;g++,p++)p>=0&&(f=f>>8|(255&f)<<4,p-=S,x=this.getNoteFreq(i+(15&f)+t.i[2]-128),N=this.getNoteFreq(i+(15&f)+t.i[6]-128)*(1+8e-4*t.i[7])),d=1,g<c?d=g/c:g>=c+u&&(d-=(g-c-u)*w),C=x,e&&(C*=d*d),$=o(y+=C)*r,C=N,a&&(C*=d*d),$+=n(B+=C)*h,m&&($+=(2*Math.random()-1)*m),M[g]=80*$*d|0;return M},this.mSong=t,this.mLastRow=t.endPattern,this.mCurrentCol=0,this.mNumWords=t.rowLen*t.patternLen*(this.mLastRow+1)*2,this.mMixBuf=new Int32Array(this.mNumWords)}}class oa{constructor(e){this.gameTopBar=e}create(e,t=1,o=!1,r=!1){const a=document.createElement("audio");a.volume=t,a.autoplay=o,a.loop=r;const $=new Ia(e),n=setInterval(()=>{if($.generate()>=1){clearInterval(n);const e=$.createWave();a.src=URL.createObjectURL(new Blob([e],{type:"audio/wav"}))}},300);return this.gameTopBar.onAudioMuteChanged.addListener(e=>{a.muted=e}),a}}oa.inject=j.tokens("gameTopBar");function Ja(e,t,r){e.some(function(e){return e.listener===t})||e.unshift({listener:t,listenOnlyOnce:r})}function Ka(e,t){for(var r=e.length-1;r>=0;r--)e[r].listener===t&&e.splice(r,1)}function La(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r],i=n.listener,$=n.listenOnlyOnce;i(t),$&&e.splice(r,1)}}var v=function(){var e=[];this.getter={addListener:function(t,r){return Ja(e,t,r)},removeListener:function(t){return Ka(e,t)}},this.dispatch=function(t){return La(e,t)}};class pa{constructor(t){this.gamePlayScene=t,this.onGamePlayCountDownStartedDispatcher=new v,this.onGamePlayCountDownUpdatedDispatcher=new v,this.onGamePlayCountDownStoppedDispatcher=new v,this.onGamePlayCountDownTimeOverDispatcher=new v,this.count=0,this.intervalTimerId=null,this.ONE_SECOND=1e3,this.isRunning=!1,this.gamePlayScene.onAnsweredCorrectly.addListener(()=>this.addBonusTime(5)),this.gamePlayScene.onAnsweredWrongly.addListener(()=>this.deductTime(1))}get onGamePlayCountDownTimeOver(){return this.onGamePlayCountDownTimeOverDispatcher.getter}get onGamePlayCountDownStopped(){return this.onGamePlayCountDownStoppedDispatcher.getter}get onGamePlayCountDownUpdated(){return this.onGamePlayCountDownUpdatedDispatcher.getter}get onGamePlayCountDownStarted(){return this.onGamePlayCountDownStartedDispatcher.getter}addBonusTime(t){this.count+=t,this.onGamePlayCountDownUpdatedDispatcher.dispatch(this.count)}deductTime(t){this.count-=t,this.count>0?this.onGamePlayCountDownUpdatedDispatcher.dispatch(this.count):(this.stop(),this.onGamePlayCountDownTimeOverDispatcher.dispatch())}start(t){this.isRunning||(this.count=t,this.intervalTimerId=setInterval(()=>{this.deductTime(1)},this.ONE_SECOND),this.isRunning=!0,this.onGamePlayCountDownStartedDispatcher.dispatch(this.count))}stop(){clearInterval(this.intervalTimerId),this.isRunning=!1,this.onGamePlayCountDownStoppedDispatcher.dispatch(this.count)}}pa.inject=j.tokens("gamePlayScene");class Ma{constructor(){this.menuCarousel=document.querySelector(".menu-carousel"),this.previousButton=document.querySelector(".previous.button"),this.nextButton=document.querySelector(".next.button"),this.headerCenter=document.querySelector(".header .center"),this.headerRight=document.querySelector(".header .right"),this.speaker=document.querySelector(".speaker"),this.sentenceElement=document.querySelector(".sentence"),this.questionElement=document.querySelector(".question"),this.currentStreakElements=document.querySelectorAll(".current-streak"),this.longestStreakElements=document.querySelectorAll(".longest-streak"),this.answerButtons=document.querySelectorAll(".answer"),this.backToMenuButtons=document.querySelectorAll(".back-to-menu.button"),this.allButtons=document.querySelectorAll(".button")}getScene(e){return document.querySelector(`div[data-scene="${e}"]`)}getAnswerButton(e){return document.querySelector(`.answer[data-id="${e}"]`)}setBackgroundId(e){const t=document.querySelector(".container").classList;for(let r=1;r<5;r++)t.remove(`background${r}`);t.add(`background${e}`)}}var Na=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function Oa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Pa=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oa(this,t),this.start=e.start,this.end=e.end,this.decimal=e.decimal}return Na(t,[{key:"getIntermediateValue",value:function(t){return this.decimal?t:Math.round(t)}},{key:"getFinalValue",value:function(){return this.end}}]),t}(),Qa=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function Ra(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var z=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ra(this,t),this.duration=e.duration||1e3,this.ease=e.easing||this._defaultEase,this.tweener=e.tweener||new Pa(e),this.start=this.tweener.start,this.end=this.tweener.end,this.frame=null,this.next=null,this.isRunning=!1,this.events={},this.direction=this.start<this.end?"up":"down"}return Qa(t,[{key:"begin",value:function(){return this.isRunning||this.next===this.end||(this.frame=window.requestAnimationFrame(this._tick.bind(this))),this}},{key:"stop",value:function(){return window.cancelAnimationFrame(this.frame),this.isRunning=!1,this.frame=null,this.timeStart=null,this.next=null,this}},{key:"on",value:function(t,e){return this.events[t]=this.events[t]||[],this.events[t].push(e),this}},{key:"_emit",value:function(t,e){var n=this,i=this.events[t];i&&i.forEach(function(t){return t.call(n,e)})}},{key:"_tick",value:function(t){this.isRunning=!0;var e=this.next||this.start;this.timeStart||(this.timeStart=t),this.timeElapsed=t-this.timeStart,this.next=this.ease(this.timeElapsed,this.start,this.end-this.start,this.duration),this._shouldTick(e)?(this._emit("tick",this.tweener.getIntermediateValue(this.next)),this.frame=window.requestAnimationFrame(this._tick.bind(this))):(this._emit("tick",this.tweener.getFinalValue()),this._emit("done",null))}},{key:"_shouldTick",value:function(t){return{up:this.next<this.end&&t<=this.next,down:this.next>this.end&&t>=this.next}[this.direction]}},{key:"_defaultEase",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}}]),t}();const da=4,J="Back Read";const Sa=["B","C","D","F","G","H","J","K","L","M","N","P","Q","R","S","T","V","W","X","Y","Z"],qa=["A","E","I","O","U"];const ea=[["seal","meal","deal","teal"],["make","fake","take","wake","cake","bake","rake"],["fun","sun","run","bun"],["par","car","far","bar"],["their","there","share","where"],["wear","tear","fear","near","dear","rear","pear"],["chair","stair","fair","hair"],["bay","day","pay","fay","may"],["stay","play","slay","tray"],["date","late","gate","rate","hate","mate"],["rare","dare","fare","care"],["viable","table","cable","fable"],["tone","phone","hone","cone","none","done"],["snow","show","crow","brow","know"],["slow","glow","flow","blow"],["toe","woe","foe","doe"],["now","how","wow","low","vow"],["tall","call","ball","fall"],["might","sight","night","right","tight"],["kite","rite","site","bite"],["rice","nice","dice","vice","mice"],["sense","tense","dense","fence"],["fell","well","tell","bell","hell","sell","yell"],["weigh","sleigh","eight","weight"],["day","hay","may","pay"],["page","wage","rage","cage"],["bee","see","sea","tea"],["beach","teach","reach","peach","leach"],["sane","lane","cane","pane"],["look","cook","book","took"],["tiny","silly","very","lazy"],["week","geek","reek","meet","meat"],["spout","trout","shout","trout","about"],["like","bike","pike","dike"],["free","three","agree","tree"],["could","would","mould","should"],["grain","chain","brain","drain","plain","train"],["gain","pain","rain","main"],["creep","sheep","sweep","sleep","steep","cheep"],["keep","peep","weep","jeep","beep"]];var Ta,D;(function(t){t[t.Addition=0]="Addition",t[t.Subtraction=1]="Subtraction",t[t.Multiplication=2]="Multiplication",t[t.Division=3]="Division"})(D||(Ta=D={},Ta));var Ua,K;(function(e){e[e.WhatIsTheWord=0]="WhatIsTheWord",e[e.WhatIsTheResult=1]="WhatIsTheResult",e[e.FindTheMissingLetter=2]="FindTheMissingLetter"})(K||(Ua=K={},Ua));class ra{constructor(e,t){this.gameHtmlElement=e,this.gameStreakManager=t,this.onAnsweredCorrectlyDispatcher=new v,this.onAnsweredWronglyDispatcher=new v,this.buttonsBlocked=!1,this.listenToAnswersSelected()}get onAnsweredWrongly(){return this.onAnsweredWronglyDispatcher.getter}get onAnsweredCorrectly(){return this.onAnsweredCorrectlyDispatcher.getter}setSentence(e){this.gameHtmlElement.sentenceElement.innerText=e}setQuestion(e){this.gameHtmlElement.questionElement.innerText=e}setAnswers(e){b.shuffle(e);for(let t=0;t<e.length;t++)this.gameHtmlElement.getAnswerButton(t).innerText=e[t].toString()}preparePhase(){if(this.gameStreakManager.currentStreak<10)this.prepareWhatIsTheWord();else if(this.gameStreakManager.currentStreak<20)b.pickIntInclusive(0,1)?this.prepareWhatIsTheWord():this.prepareFindTheMissingLetter();else switch(b.pickElementFromEnum(K)){case K.WhatIsTheWord:this.prepareWhatIsTheWord();break;case K.FindTheMissingLetter:this.prepareFindTheMissingLetter();break;case K.WhatIsTheResult:this.prepareWhatIsTheResult();}}listenToAnswersSelected(){Array.from(this.gameHtmlElement.answerButtons).forEach(e=>{e.addEventListener("click",()=>{this.buttonsBlocked||(this.blockButtons(),this.processAnswer(e.innerText))})})}processAnswer(e){e==this.expectedAnswer?this.onAnsweredCorrectlyDispatcher.dispatch():this.onAnsweredWronglyDispatcher.dispatch(),this.startFadeOutTween()}updateOpacityOnFadeTweenTick(e){this.gameHtmlElement.getScene(k.GamePlay).style.opacity=(e/100).toString()}startFadeOutTween(){new z({start:100,end:0,duration:500}).on("tick",e=>this.updateOpacityOnFadeTweenTick(e)).on("done",()=>{this.preparePhase(),this.startFadeInTween()}).begin()}startFadeInTween(){new z({start:0,end:100,duration:500}).on("tick",e=>this.updateOpacityOnFadeTweenTick(e)).on("done",()=>this.unblockButtons()).begin()}blockButtons(){this.buttonsBlocked=!0}unblockButtons(){this.buttonsBlocked=!1}prepareWhatIsTheWord(){const e=[...b.pickElementFromArray(ea)],t=[];for(let r=0;r<da;r++){const r=b.pickIndexFromLength(e.length);t.push(e.splice(r,1))}this.expectedAnswer=b.pickElementFromArray(t),this.setSentence(this.expectedAnswer),this.setQuestion("Which word is that?"),this.setAnswers(t)}prepareFindTheMissingLetter(){const e=b.pickElementFromArray(ea),t=b.pickElementFromArray(e),r=b.pickIndexFromLength(t.length),n=t[r],i=[],s=qa.indexOf(n.toUpperCase())>=0?Array.from(qa):Array.from(Sa);do{const e=b.pickIndexFromLength(s.length),n=s.splice(e,1)[0],o=t.substr(0,r)+n+t.substr(r+1);this.wordExists(o)||i.push(n)}while(i.length<da);-1==i.indexOf(n.toUpperCase())&&(i[b.pickIndexFromLength(i.length)]=n.toUpperCase());const o=`${t.substr(0,r)}_${t.substr(r+1)}`;this.expectedAnswer=n.toUpperCase(),this.setSentence(o),this.setQuestion("Which letter is missing?"),this.setAnswers(i)}prepareWhatIsTheResult(){let e=0,t=0,r=0,n="";switch(b.pickElementFromEnum(D)){case D.Addition:n="+",r=(e=b.pickIntInclusive(1,50))+(t=b.pickIntInclusive(1,50));break;case D.Multiplication:n="\xD7",r=(e=b.pickIntInclusive(1,9))*(t=b.pickIntInclusive(1,9));break;case D.Subtraction:n="-",r=(e=b.pickIntInclusive(50,99))-(t=b.pickIntInclusive(1,49));break;case D.Division:n="\xF7",t=b.pickIntInclusive(1,9),r=(e=b.pickIntInclusive(1,9)*t)/t;}const i=[];for(let s=0;s<da;s++)i.push(b.pickIntInclusive(r-20,r+20));-1==i.indexOf(r)&&(i[b.pickIndexFromLength(i.length)]=r),this.expectedAnswer=r.toString(),this.setSentence(`${e} ${n} ${t}`),this.setQuestion("What is the result?"),this.setAnswers(i)}wordExists(e){return ea.some(t=>t.some(t=>e.toLowerCase()==t.toLowerCase()))}}ra.inject=j.tokens("gameHtmlElement","gameStreakManager");class sa{constructor(e){this.gameHtmlElement=e,this.currentScene=k.Menu,this.onSceneDisplayedDispatcher=new v,this.displayScene(this.currentScene)}get onSceneDisplayed(){return this.onSceneDisplayedDispatcher.getter}displayScene(e){const t=t=>{this.gameHtmlElement.getScene(e).style.opacity=(t/100).toString()};new z({start:100,end:0,duration:500}).on("tick",t=>{this.gameHtmlElement.getScene(e).style.opacity=(t/100).toString()}).on("done",()=>{for(const t of Object.keys(k)){const n=this.gameHtmlElement.getScene(k[t]);e==t?n.classList.remove("inactive"):n.classList.add("inactive")}new z({start:0,end:100,duration:500}).on("tick",t).on("done",()=>{this.onSceneDisplayedDispatcher.dispatch(e)}).begin()}).begin()}}sa.inject=j.tokens("gameHtmlElement");class Va{constructor(){this.memoryStorage={longestStreak:0}}isLocalStorageAvailable(){try{const t=Math.random().toString(36);return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}save(e){if(!this.isLocalStorageAvailable())return void(this.memoryStorage=e);const t=JSON.stringify(e),r=this.getCipher(J)(t);localStorage.setItem(J,r)}load(){if(!this.isLocalStorageAvailable())return this.memoryStorage;const e=localStorage.getItem(J);if(!e)return null;const t=this.getDecipher(J)(e);return JSON.parse(t)}getCipher(e){const t=e=>e.split("").map(e=>e.charCodeAt(0)),r=e=>`0${Number(e).toString(16)}`.substr(-2),a=r=>t(e).reduce((e,t)=>e^t,r);return e=>e.split("").map(t).map(a).map(r).join("")}getDecipher(e){const t=t=>(e=>e.split("").map(e=>e.charCodeAt(0)))(e).reduce((e,t)=>e^t,t);return e=>e.match(/.{1,2}/g).map(e=>parseInt(e,16)).map(t).map(e=>String.fromCharCode(e)).join("")}}class ta{constructor(t,e){this.gameStorage=t,this.gameHtmlElement=e,this._currentStreak=0,this._longestStreak=0;const r=this.gameStorage.load();r&&(this.longestStreak=r.longestStreak)}get currentStreak(){return this._currentStreak}set currentStreak(t){this._currentStreak=t,Array.from(this.gameHtmlElement.currentStreakElements).forEach(t=>{t.innerText=this._currentStreak.toString()}),this.longestStreak=Math.max(this.currentStreak,this.longestStreak)}get longestStreak(){return this._longestStreak}set longestStreak(t){t!=this._longestStreak&&(this._longestStreak=t,Array.from(this.gameHtmlElement.longestStreakElements).forEach(t=>{t.innerText=this._longestStreak.toString()}),this.gameStorage.save({longestStreak:this._longestStreak}))}increaseStreak(){this.currentStreak++}}ta.inject=j.tokens("gameStorage","gameHtmlElement");class ua{constructor(e,t){this.gameHtmlElement=e,this.gameCountDownTimer=t,this.onAudioMuteChangedDispatcher=new v,this.clockIcon=this.gameHtmlElement.headerRight.innerHTML,this.gameHtmlElement.speaker.addEventListener("click",()=>this.toggleSound()),this.gameCountDownTimer.onGamePlayCountDownStarted.addListener(e=>this.displayCountDown(e)),this.gameCountDownTimer.onGamePlayCountDownUpdated.addListener(e=>this.displayCountDown(e)),this.gameCountDownTimer.onGamePlayCountDownStopped.addListener(()=>this.displayClockIcon()),this.gameCountDownTimer.onGamePlayCountDownTimeOver.addListener(()=>this.displayClockIcon())}get onAudioMuteChanged(){return this.onAudioMuteChangedDispatcher.getter}changeInnerHTML(e){return new Promise(t=>{const n=e=>{this.gameHtmlElement.headerCenter.style.opacity=(e/100).toString()};new z({start:100,end:0,duration:500}).on("tick",n).on("done",()=>{this.gameHtmlElement.headerCenter.innerHTML=e,new z({start:0,end:100,duration:500}).on("tick",n).on("done",t).begin()}).begin()})}displayCountDown(e){if(this.gameHtmlElement.headerRight.innerHTML=e.toString(),e>5)return;const t=e=>{this.gameHtmlElement.headerRight.style.transform=`scale(${e/100})`};new z({start:100,end:200,duration:250}).on("tick",t).on("done",()=>{new z({start:200,end:100,duration:250}).on("tick",t).begin()}).begin()}displayClockIcon(){this.gameHtmlElement.headerRight.innerHTML=this.clockIcon}isAudioDisabled(){return this.gameHtmlElement.speaker.classList.contains("off")}toggleSound(){const{classList:e}=this.gameHtmlElement.speaker;e.toggle("on"),e.toggle("off"),this.onAudioMuteChangedDispatcher.dispatch(this.isAudioDisabled())}displayNotification(e){this.changeInnerHTML(`<em>${e}</em>`).then(()=>{this.changeInnerHTML(J).then()})}}ua.inject=j.tokens("gameHtmlElement","gameCountDownTimer");const va=j.rootInjector.provideClass("gameHtmlElement",Ma).provideClass("gameStorage",Va).provideClass("gameStreakManager",ta).provideClass("gamePlayScene",ra).provideClass("gameCountDownTimer",pa).provideClass("gameTopBar",ua).provideClass("gameSceneManager",sa).provideClass("gameMenu",ca).provideClass("gameAudio",oa).provideClass("gameListeners",ba);va.injectClass(ca),va.injectClass(ba);})();</script> </body></html>